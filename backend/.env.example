# ============================================
# ChaLog 백엔드 환경 변수
# ============================================
# 
# 사용 방법:
# 1. 이 파일을 복사하여 .env 파일 생성: cp .env.example .env
# 2. 실제 값으로 변경
# 3. .env 파일은 .gitignore에 포함되어 있어 커밋되지 않습니다
#
# 자세한 내용: docs/ENVIRONMENT_VARIABLES.md

# ============================================
# 데이터베이스 설정
# ============================================

# 데이터베이스 연결 URL
# 필수: ✅
# 설명: MySQL/MariaDB 데이터베이스 연결 정보
# 형식: mysql://사용자명:비밀번호@호스트:포트/데이터베이스명
# 
# 로컬 개발 (SSH 터널 사용):
#   DATABASE_URL=mysql://admin:password@localhost:3307/chalog
#
# EC2 프로덕션 (RDS 직접 연결):
#   DATABASE_URL=mysql://admin:password@your-rds-endpoint.rds.amazonaws.com:3306/chalog
# ⚠️ 보안: 비밀번호에 특수문자(@, : 등)가 포함되어도 URL 인코딩 없이 사용 가능
DATABASE_URL=mysql://admin:password@localhost:3307/chalog

# 데이터베이스 스키마 자동 동기화
# 필수: ❌ (기본값: false)
# 설명: TypeORM이 엔티티 변경사항을 자동으로 DB에 반영할지 여부
# ⚠️ 주의: 프로덕션에서는 반드시 false로 설정 (데이터 손실 위험)
# ⚠️ 주의: 개발 환경에서도 신중하게 사용하세요 (기존 데이터가 삭제될 수 있음)
DB_SYNCHRONIZE=false

# SSL 연결 활성화
# 필수: ❌ (기본값: false)
# 설명: 데이터베이스 연결 시 SSL/TLS 사용 여부
# AWS RDS/Aurora 사용 시: true 권장
# 로컬 개발: false (일반적으로 SSL 인증서 없음)
DB_SSL_ENABLED=false

# SSL 인증서 검증
# 필수: ❌ (기본값: true)
# 설명: SSL 인증서 검증 여부
# 프로덕션: true 권장 (보안 강화)
# 개발/테스트: false (자체 서명 인증서 사용 시)
DB_SSL_REJECT_UNAUTHORIZED=true

# ============================================
# JWT 인증 설정
# ============================================

# JWT 토큰 서명용 비밀키
# 필수: ✅
# 설명: JWT 토큰을 서명하고 검증하는 데 사용하는 비밀키
# ⚠️ 보안: 프로덕션에서는 반드시 강력한 랜덤 문자열로 변경하세요
# 생성 방법:
#   openssl rand -base64 32
#   또는
#   node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# ⚠️ 주의: 이 값이 노출되면 보안 위험이 있으므로 절대 공개하지 마세요
JWT_SECRET=your-secret-key-change-this-in-production

# JWT 토큰 만료 시간
# 필수: ❌ (기본값: 7d)
# 설명: JWT 토큰의 유효 기간
# 형식: 숫자 + 단위 (예: 7d, 24h, 60m, 3600s)
# 예시: 7d (7일), 24h (24시간), 30m (30분)
JWT_EXPIRES_IN=7d

# ============================================
# 서버 설정
# ============================================

# 서버 포트
# 필수: ❌ (기본값: 3000)
# 설명: 백엔드 서버가 리스닝할 포트 번호
# 개발 환경: 3000 (기본값)
# 프로덕션: 3000 또는 환경에 맞게 변경
PORT=3000

# 실행 환경
# 필수: ❌ (기본값: development)
# 설명: 애플리케이션 실행 환경
# 가능한 값: development, production
# development: 개발 모드 (로깅 활성화, 상세 에러 메시지)
# production: 프로덕션 모드 (최적화, 보안 강화)
NODE_ENV=development

# ============================================
# 프론트엔드 URL 설정 (CORS)
# ============================================

# 프론트엔드 URL (단일)
# 필수: ❌
# 설명: CORS 허용할 프론트엔드 URL (단일)
# 개발 환경: http://localhost:5173
# 프로덕션: https://your-domain.vercel.app
# 참고: FRONTEND_URLS를 사용하면 여러 URL 설정 가능
FRONTEND_URL=http://localhost:5173

# 프론트엔드 URL 목록 (쉼표로 구분)
# 필수: ❌
# 설명: CORS 허용할 프론트엔드 URL 목록
# 형식: URL1,URL2,URL3 (공백 없이 쉼표로 구분)
# 개발 환경: http://localhost:5173
# 프로덕션: https://your-domain.vercel.app,http://localhost:5173
# 참고: FRONTEND_URL보다 우선순위가 높습니다
FRONTEND_URLS=http://localhost:5173

# ============================================
# SSH 터널 설정 (로컬 개발용)
# ============================================
# 
# 로컬 개발 환경에서 RDS에 연결하기 위한 SSH 터널 설정
# 프로덕션(EC2)에서는 사용하지 않습니다
# 
# SSH 터널 사용 방법:
#   1. 이 변수들을 설정
#   2. ./scripts/start-ssh-tunnel.sh 실행
#   3. DATABASE_URL에서 localhost:3307 사용

# SSH 키 파일 경로
# 필수: ✅ (SSH 터널 사용 시)
# 설명: EC2에 접속하기 위한 SSH 개인 키 파일 경로
# 예시: ~/.ssh/your-key.pem 또는 /path/to/key.pem
# ⚠️ 보안: 이 파일은 절대 공개하지 마세요
SSH_KEY_PATH=~/.ssh/your-key.pem

# EC2 호스트 (Public IP 또는 도메인)
# 필수: ✅ (SSH 터널 사용 시)
# 설명: EC2 인스턴스의 Public IP 주소 또는 도메인
# 확인 방법: AWS 콘솔 → EC2 → Instances → Public IPv4 address
# 예시: 54.123.45.67 또는 ec2.example.com
EC2_HOST=your-ec2-host

# EC2 사용자명
# 필수: ✅ (SSH 터널 사용 시)
# 설명: EC2 인스턴스의 사용자명
# Ubuntu: ubuntu
# Amazon Linux: ec2-user
# Debian: admin
EC2_USER=ubuntu

# SSH 터널 로컬 포트
# 필수: ❌ (기본값: 3307)
# 설명: 로컬에서 SSH 터널을 통해 접속할 포트
# 개발 환경: 3307 (기본값)
# 참고: DATABASE_URL에서 이 포트를 사용합니다
SSH_TUNNEL_LOCAL_PORT=3307

# RDS 엔드포인트 (SSH 터널을 통해 연결할 원격 호스트)
# 필수: ✅ (SSH 터널 사용 시)
# 설명: RDS 인스턴스의 엔드포인트 주소
# 확인 방법: AWS 콘솔 → RDS → Databases → Endpoint
# 예시: your-db.xxxxx.ap-northeast-2.rds.amazonaws.com
SSH_TUNNEL_REMOTE_HOST=your-rds-endpoint.rds.amazonaws.com

# RDS 포트
# 필수: ❌ (기본값: 3306)
# 설명: RDS 인스턴스의 포트 번호
# MySQL/MariaDB: 3306 (기본값)
# PostgreSQL: 5432
SSH_TUNNEL_REMOTE_PORT=3306
