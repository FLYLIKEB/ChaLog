# 카카오 로그인 설정 오류 해결 가이드

## 에러 메시지

### 에러 1: 웹 플랫폼 미등록
```
GET https://kauth.kakao.com/oauth/error/kakaojs?error_description=invalid%20android_key_hash%20or%20ios_bundle_id%20or%20web_site_url&error=misconfigured
```

### 에러 2: 401 Unauthorized (현재 발생 중)
```
GET https://kauth.kakao.com/oauth/authorize?client_id=...&redirect_uri=kakaojs&... 401 (Unauthorized)
```

## 원인

### 에러 1 원인
카카오 개발자 콘솔에서 **웹 플랫폼이 등록되지 않았거나**, **사이트 도메인이 올바르게 설정되지 않음**

### 에러 2 원인 (401 Unauthorized)
- 카카오 로그인이 **비활성화**되어 있음
- 앱 상태가 **"서비스 중지"** 상태
- **Redirect URI**가 정확히 등록되지 않음
- 카카오 앱 키가 잘못되었거나 권한이 없음

## 해결 방법

### 1. 카카오 개발자 콘솔 접속
- [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
- 로그인 후 해당 애플리케이션 선택

### 2. 웹 플랫폼 등록 (필수)

**경로:** 앱 설정 → 플랫폼 → Web 플랫폼 등록

**사이트 도메인 등록:**
```
http://localhost:5173
```

**중요:**
- `http://` 포함하여 정확히 입력
- 포트 번호(`:5173`) 포함
- 마지막에 `/` 없이 입력
- 저장 후 **5-10분 대기** (설정 반영 시간)

### 3. 카카오 로그인 Redirect URI 설정

**경로:** 제품 설정 → 카카오 로그인 → Redirect URI

**등록할 URI:**
```
http://localhost:5173
```

**참고:**
- JavaScript SDK를 사용하므로 실제 리다이렉트는 발생하지 않지만, 카카오에서 요구하는 필수 설정입니다.

### 4. 카카오 로그인 활성화 확인 (401 에러 해결)

**경로:** 제품 설정 → 카카오 로그인 → 활성화 설정

**확인 사항:**
1. **활성화 설정**이 **"활성화"**로 되어 있는지 확인
2. **앱 상태** 확인:
   - **경로:** 앱 설정 → 앱 상태
   - 상태가 **"서비스 중"** 또는 **"개발 중"**인지 확인
   - **"서비스 중지"** 상태라면 **"서비스 시작"** 클릭

**중요:** 
- 앱 상태가 "서비스 중지"이면 카카오 로그인이 작동하지 않습니다
- 상태 변경 후 **5-10분 대기** (설정 반영 시간)

### 5. 설정 확인 체크리스트

- [ ] 웹 플랫폼 등록됨 (`http://localhost:5173`)
- [ ] Redirect URI 등록됨 (`http://localhost:5173`)
- [ ] **카카오 로그인 활성화됨** ⚠️ (401 에러 시 필수 확인)
- [ ] **앱 상태가 "서비스 중" 또는 "개발 중"** ⚠️ (401 에러 시 필수 확인)
- [ ] REST API 키 확인: 카카오 개발자 콘솔에서 확인 (`.env` 파일의 `VITE_KAKAO_APP_KEY`와 다를 수 있음)

### 6. 설정 후 확인

1. **브라우저 캐시 삭제** (Ctrl+Shift+Delete 또는 Cmd+Shift+Delete)
2. **프론트엔드 서버 재시작**:
   ```bash
   pkill -f "vite" || true
   npm run dev
   ```
3. **브라우저에서 테스트**:
   - `http://localhost:5173/login` 접속
   - "카카오로 로그인" 버튼 클릭
   - 카카오 로그인 팝업이 정상적으로 나타나는지 확인

### 7. 401 Unauthorized 에러 해결 방법

**가장 흔한 원인:**
1. **카카오 로그인이 비활성화되어 있음**
   - 해결: 제품 설정 → 카카오 로그인 → 활성화 설정 → "활성화" 선택

2. **동의항목이 설정되지 않음**
   - 해결: 제품 설정 → 카카오 로그인 → 동의항목 → 필수 동의항목 설정 (닉네임 등)

3. **Redirect URI가 정확히 등록되지 않음**
   - 해결: 제품 설정 → 카카오 로그인 → Redirect URI에 `http://localhost:5173` 정확히 입력

**단계별 확인:**
1. [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
2. **제품 설정** → **카카오 로그인** → **일반** 메뉴 이동
3. **사용 설정** 확인 → **"ON"**으로 되어 있는지 확인 (현재 확인됨 ✅)
4. **리다이렉트 URI** 확인 → `http://localhost:5173`이 정확히 등록되어 있는지 확인 (현재 확인됨 ✅)
5. **제품 설정** → **카카오 로그인** → **동의항목** 메뉴 이동
   - 필수 동의항목이 설정되어 있는지 확인 (닉네임 등)
6. **앱 설정** → **플랫폼** → **Web** 확인
   - `http://localhost:5173`이 사이트 도메인으로 등록되어 있는지 확인 (현재 확인됨 ✅)
7. 모든 설정 저장 후 **10분 이상 대기** (설정 반영 시간)
8. 브라우저 캐시 삭제 후 재시도

### 8. 여전히 오류가 발생하는 경우

1. **카카오 SDK 초기화 확인**:
   브라우저 콘솔(F12)에서:
   ```javascript
   console.log(window.Kakao);
   console.log(window.Kakao?.isInitialized());
   ```

2. **환경 변수 확인**:
   `.env` 파일에 다음이 있는지 확인:
   ```env
   VITE_KAKAO_APP_KEY=your-kakao-app-key
   ```
   
   > **주의**: 실제 카카오 앱 키는 카카오 개발자 콘솔에서 확인하세요. 문서에는 예시 값만 표시합니다.

3. **카카오 개발자 콘솔에서 설정 재확인**:
   - 웹 플랫폼 도메인이 정확히 `http://localhost:5173`인지 확인
   - 저장 후 충분한 시간(10분 이상) 대기

4. **다른 브라우저에서 테스트**:
   - 시크릿 모드에서 테스트
   - 다른 브라우저(Chrome, Firefox 등)에서 테스트

