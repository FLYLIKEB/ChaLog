# HTTPS ì„¤ì • ë‹¨ê³„ë³„ ì‹¤í–‰ ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” HTTPS ì„¤ì •ì„ ë‹¨ê³„ë³„ë¡œ ì§„í–‰í•˜ëŠ” ì‹¤ì „ ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì§„í–‰ ìƒí™©ì„ ì²´í¬í•˜ë©´ì„œ ë‹¨ê³„ë³„ë¡œ ì§„í–‰í•˜ì„¸ìš”.

- [ ] 1ë‹¨ê³„: ë„ë©”ì¸ ì¤€ë¹„
- [ ] 2ë‹¨ê³„: DNS ì„¤ì •
- [ ] 3ë‹¨ê³„: EC2 ë³´ì•ˆ ê·¸ë£¹ í™•ì¸
- [ ] 4ë‹¨ê³„: EC2ì— Nginx ì„¤ì¹˜
- [ ] 5ë‹¨ê³„: SSL ì¸ì¦ì„œ ë°œê¸‰
- [ ] 6ë‹¨ê³„: Vercel í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸

## 1ë‹¨ê³„: ë„ë©”ì¸ ì¤€ë¹„

### í•„ìš”í•œ ì •ë³´

**ì§ˆë¬¸**: ì‚¬ìš© ì¤‘ì¸ ë„ë©”ì¸ì´ ìˆë‚˜ìš”?

- [ ] ì˜ˆ, ë„ë©”ì¸ì´ ìˆìŠµë‹ˆë‹¤ â†’ 2ë‹¨ê³„ë¡œ ì§„í–‰
- [ ] ì•„ë‹ˆìš”, ë„ë©”ì¸ì´ ì—†ìŠµë‹ˆë‹¤ â†’ ë„ë©”ì¸ êµ¬ë§¤ í•„ìš”

**ë„ë©”ì¸ êµ¬ë§¤ ì¶”ì²œ ì‚¬ì´íŠ¸:**
- AWS Route 53
- Namecheap
- GoDaddy
- Google Domains

> **ì°¸ê³ **: ë„ë©”ì¸ ì—†ì´ëŠ” SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

## 2ë‹¨ê³„: DNS ì„¤ì •

### 2.1 A ë ˆì½”ë“œ ì¶”ê°€

ë„ë©”ì¸ DNS ê´€ë¦¬ í˜ì´ì§€ì—ì„œ:

**ì„¤ì •í•  ì •ë³´:**
- **í˜¸ìŠ¤íŠ¸/ì„œë¸Œë„ë©”ì¸**: `api` (ë˜ëŠ” ì›í•˜ëŠ” ì´ë¦„)
- **íƒ€ì…**: `A`
- **ê°’/IP**: `52.78.150.124`
- **TTL**: `3600` (ë˜ëŠ” ê¸°ë³¸ê°’)

**ê²°ê³¼:**
- `api.yourdomain.com` â†’ `52.78.150.124`ë¡œ ì—°ê²°

### 2.2 DNS ì „íŒŒ í™•ì¸

ë¡œì»¬ì—ì„œ í™•ì¸:

```bash
# DNS í™•ì¸
nslookup api.yourdomain.com
# ë˜ëŠ”
dig api.yourdomain.com

# ì˜ˆìƒ ì¶œë ¥:
# api.yourdomain.com. 3600 IN A 52.78.150.124
```

> âš ï¸ **ì¤‘ìš”**: DNS ì „íŒŒëŠ” ë³´í†µ 5-10ë¶„, ìµœëŒ€ 24ì‹œê°„ ì†Œìš”ë©ë‹ˆë‹¤.

## 3ë‹¨ê³„: EC2 ë³´ì•ˆ ê·¸ë£¹ í™•ì¸

### 3.1 AWS ì½˜ì†”ì—ì„œ í™•ì¸

1. AWS ì½˜ì†” â†’ EC2 â†’ Security Groups
2. EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°ëœ ë³´ì•ˆ ê·¸ë£¹ ì„ íƒ
3. **Inbound rules** í™•ì¸

**í•„ìˆ˜ ê·œì¹™:**
- âœ… HTTP (80) - 0.0.0.0/0
- âœ… HTTPS (443) - 0.0.0.0/0

**ê·œì¹™ì´ ì—†ë‹¤ë©´ ì¶”ê°€:**
1. **Edit inbound rules** í´ë¦­
2. **Add rule** í´ë¦­
3. HTTP (80), HTTPS (443) ì¶”ê°€
4. Source: 0.0.0.0/0
5. **Save rules** í´ë¦­

## 4ë‹¨ê³„: EC2ì— Nginx ì„¤ì¹˜

### 4.1 SSH ì ‘ì†

```bash
ssh -i ~/.ssh/summy.pem ubuntu@52.78.150.124
```

### 4.2 HTTPS ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

**ë°©ë²• 1: ì›ê²©ì—ì„œ ì§ì ‘ ì‹¤í–‰ (ê¶Œì¥)**

```bash
# GitHubì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ ë° ì‹¤í–‰
curl -fsSL https://raw.githubusercontent.com/FLYLIKEB/ChaLog/main/backend/scripts/setup-https.sh | bash
```

**ë°©ë²• 2: ë¡œì»¬ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì „ì†¡ í›„ ì‹¤í–‰**

```bash
# ë¡œì»¬ì—ì„œ
scp -i ~/.ssh/summy.pem backend/scripts/setup-https.sh ubuntu@52.78.150.124:/tmp/

# EC2ì—ì„œ
ssh -i ~/.ssh/summy.pem ubuntu@52.78.150.124
bash /tmp/setup-https.sh
```

### 4.3 ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì¤‘ ì…ë ¥

ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ë©´:
1. ë„ë©”ì¸ ì…ë ¥ ìš”ì²­: `api.yourdomain.com` ì…ë ¥
2. DNS í™•ì¸ í›„ ê³„ì† ì§„í–‰
3. ì´ë©”ì¼ ì…ë ¥ (ì¸ì¦ì„œ ë§Œë£Œ ì•Œë¦¼ìš©)
4. ì•½ê´€ ë™ì˜: `Y`

## 5ë‹¨ê³„: SSL ì¸ì¦ì„œ ë°œê¸‰ í™•ì¸

### 5.1 Health Check

```bash
# HTTPSë¡œ Health Check
curl https://api.yourdomain.com/health

# ì˜ˆìƒ ì¶œë ¥:
# {"status":"healthy","service":"ChaLog Backend API",...}
```

### 5.2 ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸

1. ë¸Œë¼ìš°ì €ì—ì„œ `https://api.yourdomain.com/health` ì ‘ì†
2. ğŸ”’ ìë¬¼ì‡  ì•„ì´ì½˜ í™•ì¸
3. "ì•ˆì „í•œ ì—°ê²°" í‘œì‹œ í™•ì¸

## 6ë‹¨ê³„: Vercel í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸

### 6.1 Vercel ëŒ€ì‹œë³´ë“œ ì ‘ì†

1. https://vercel.com/dashboard ì ‘ì†
2. `cha-log-gilt` í”„ë¡œì íŠ¸ ì„ íƒ
3. **Settings** â†’ **Environment Variables**

### 6.2 í™˜ê²½ ë³€ìˆ˜ ìˆ˜ì •

**`VITE_API_BASE_URL` ìˆ˜ì •:**

1. ê¸°ì¡´ í™˜ê²½ ë³€ìˆ˜ ì°¾ê¸°
2. **Edit** í´ë¦­
3. Value ë³€ê²½:
   - ê¸°ì¡´: `http://52.78.150.124:3000`
   - ë³€ê²½: `https://api.yourdomain.com` (ì‹¤ì œ ë„ë©”ì¸ìœ¼ë¡œ ë³€ê²½)
4. **Save** í´ë¦­

### 6.3 ì¬ë°°í¬

1. **Deployments** íƒ­ ì´ë™
2. ìµœì‹  ë°°í¬ì˜ **â‹¯** ë©”ë‰´ í´ë¦­
3. **Redeploy** ì„ íƒ
4. ë°°í¬ ì™„ë£Œ ëŒ€ê¸° (1-3ë¶„)

## 7ë‹¨ê³„: ìµœì¢… í™•ì¸

### 7.1 í”„ë¡œë•ì…˜ ì‚¬ì´íŠ¸ í™•ì¸

1. `https://cha-log-gilt.vercel.app` ì ‘ì†
2. ë¸Œë¼ìš°ì € ì½˜ì†” (F12) ì—´ê¸°
3. **Network** íƒ­ì—ì„œ API ìš”ì²­ í™•ì¸
4. ìš”ì²­ URLì´ `https://api.yourdomain.com`ì¸ì§€ í™•ì¸
5. Mixed Content ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ í™•ì¸

### 7.2 API ë™ì‘ í™•ì¸

- í™ˆ í˜ì´ì§€ ë¡œë“œ í™•ì¸
- ì°¨ ëª©ë¡ ì¡°íšŒ í™•ì¸
- ë…¸íŠ¸ ëª©ë¡ ì¡°íšŒ í™•ì¸

## ë¬¸ì œ í•´ê²°

### DNS ì „íŒŒê°€ ì•ˆ ë  ë•Œ

```bash
# ì—¬ëŸ¬ DNS ì„œë²„ì—ì„œ í™•ì¸
dig @8.8.8.8 api.yourdomain.com
dig @1.1.1.1 api.yourdomain.com

# DNS ìºì‹œ ì‚­ì œ (macOS)
sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder
```

### SSL ì¸ì¦ì„œ ë°œê¸‰ ì‹¤íŒ¨

**ì›ì¸:**
- DNS ì „íŒŒ ë¯¸ì™„ë£Œ
- í¬íŠ¸ 80ì´ ë‹«í˜€ìˆìŒ
- ë„ë©”ì¸ì´ EC2 IPë¥¼ ê°€ë¦¬í‚¤ì§€ ì•ŠìŒ

**í•´ê²°:**
1. DNS ì „íŒŒ ëŒ€ê¸° (ìµœëŒ€ 24ì‹œê°„)
2. EC2 ë³´ì•ˆ ê·¸ë£¹ í¬íŠ¸ 80 í™•ì¸
3. `nslookup api.yourdomain.com`ìœ¼ë¡œ IP í™•ì¸

### Nginx ì˜¤ë¥˜

```bash
# ì„¤ì • íŒŒì¼ ë¬¸ë²• í™•ì¸
sudo nginx -t

# ì˜¤ë¥˜ ë¡œê·¸ í™•ì¸
sudo tail -f /var/log/nginx/error.log

# Nginx ì¬ì‹œì‘
sudo systemctl restart nginx
```

## ì™„ë£Œ í™•ì¸

ëª¨ë“  ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´:

- âœ… `https://api.yourdomain.com/health` ì ‘ì† ê°€ëŠ¥
- âœ… SSL ì¸ì¦ì„œ ì •ìƒ ì‘ë™
- âœ… Vercel í™˜ê²½ ë³€ìˆ˜ HTTPSë¡œ ë³€ê²½ë¨
- âœ… í”„ë¡œë•ì…˜ ì‚¬ì´íŠ¸ì—ì„œ Mixed Content ì˜¤ë¥˜ ì—†ìŒ
- âœ… API ìš”ì²­ ì •ìƒ ì‘ë™

## ë‹¤ìŒ ë‹¨ê³„

HTTPS ì„¤ì • ì™„ë£Œ í›„:
1. âœ… ë³´ì•ˆ ê°•í™” ì™„ë£Œ
2. âœ… Mixed Content ì˜¤ë¥˜ í•´ê²°
3. âœ… í”„ë¡œë•ì…˜ í™˜ê²½ ì•ˆì •í™”

## ê´€ë ¨ ë¬¸ì„œ

- [`docs/HTTPS_SETUP_GUIDE.md`](./HTTPS_SETUP_GUIDE.md) - ìƒì„¸ ê¸°ìˆ  ê°€ì´ë“œ
- [`docs/VERCEL_ENV_SETUP.md`](./VERCEL_ENV_SETUP.md) - Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [`backend/scripts/setup-https.sh`](../backend/scripts/setup-https.sh) - ìë™í™” ìŠ¤í¬ë¦½íŠ¸

